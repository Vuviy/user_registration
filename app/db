        $db->select("PRAGMA foreign_keys = ON;");

        $db->select("CREATE TABLE IF NOT EXISTS users (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            email TEXT NOT NULL UNIQUE,
            password_hash TEXT NOT NULL,
            is_verified INTEGER NOT NULL DEFAULT 0,
            totp_secret TEXT DEFAULT NULL,
            is_2fa_enabled INTEGER NOT NULL DEFAULT 0,
            twofa_confirmed_at DATETIME DEFAULT NULL,
            failed_login_attempts INTEGER NOT NULL DEFAULT 0,
            locked_until DATETIME NULL
            created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP)");

        $db->select("CREATE TABLE IF NOT EXISTS email_verifications (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            user_id INTEGER NOT NULL,
            token TEXT NOT NULL,
            expires_at DATETIME NOT NULL,
            created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE)");

        $db->select("CREATE TABLE audit_logs (
             id INTEGER PRIMARY KEY AUTOINCREMENT,
             user_id INTEGER NULL,
             action VARCHAR(50) NOT NULL,
             status VARCHAR(20) NOT NULL,
             ip VARCHAR(45) NOT NULL,
             user_agent TEXT NULL,
             metadata TEXT NULL,
             created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
         )");